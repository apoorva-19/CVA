{% extends "/harvest_aider/harvest_aider_base.html" %}
{% block content %}

<div class="row clearfix">
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="info-box hover-zoom-effect">
            <div class="icon bg-red">
                <i class="material-icons">input</i>
            </div>
            <div class="content">
                <div class="text">NEW REQUESTS GENERATED</div>
                <div class="number count-to" data-from="0" data-to="125" data-speed="1000" data-fresh-interval="20">125</div>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="info-box hover-zoom-effect">
            <div class="icon bg-amber">
                <i class="material-icons">bookmark</i>
            </div>
            <div class="content">
                <div class="text">JOBS SCHEDULED</div>
                <div class="number count-to" data-from="0" data-to="257" data-speed="1000" data-fresh-interval="20">257</div>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="info-box hover-zoom-effect">
            <div class="icon bg-light-green">
                <i class="material-icons">shopping_cart</i>
            </div>
            <div class="content">
                <div class="text">BAILS COLLECTED</div>
                <div class="number count-to" data-from="0" data-to="117" data-speed="1000" data-fresh-interval="20"></div>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="info-box hover-zoom-effect">
            <div class="icon bg-light-blue">
                <i class="material-icons">build</i>
            </div>
            <div class="content">
                <div class="text">EQUIPMENTS TO REPAIR</div>
                <div class="number count-to" data-from="0" data-to="1432" data-speed="1500" data-fresh-interval="20"></div>
            </div>
        </div>
    </div>
</div>
<br>
<br>
<div class="row clearfix">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
            <div class="header">
                <h2>
                    EQUIPMENT MAINTENANCE
                </h2>
            </div>
            <div class="body">
                    <form id="add_col" name="equip_form"  method='POST' action= {{ url_for('contact') }} onsubmit="return validateForm()" >
                    <div class="row clearfix form-group">
                        <div class="col-md-6">
                            <label for="equip_name">Name of Equipment</label>
                            <select class="form-control form-line" id="equip_name" name="equip_name">
                                <option value="NA">Choose Option...</option>
                                {% for equip_name in equipment_name_list %}
                                    <option value="{{equip_name}}">{{equip_name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="equip_id">Equipment id</label>
                            <select class="form-control form-line" id="equip_id" name="equip_id" disabled>
                            </select>
                        </div>
                    </div>
                    <!-- <br> -->
                   <button type="submit" class="btn btn-primary m-t-15 waves-effect">Submit</button>
                    <br>
                </form>
            </div>
        </div>
    </div>
</div>
    

<script>

    function validateForm()
    {
        var x = document.forms["equip_form"]["equip_name"].value;
        if (x == "NA")
        {
            alert("Please select a valid EQUIPMENT NAME and EQUIPMENT ID!");
            return false;
        }
        return true;
    } 


    var name_select = document.getElementById("equip_name");
    var id_select = document.getElementById("equip_id");
    name_select.onchange = function () {

        name = name_select.value;

        fetch('/harvest_aider/equipment_maintenance/' + name).then(function(response) {
            response.json().then(function(data) {
                $(".equip_id_options").remove();
                $("#equip_id").removeAttr("disabled");
                if(data.length == 0)
                    $("#equip_id").attr("disabled", "disabled");
                else
                    for(i = 0; i < data.length; i++)
                        $("#equip_id").append("<option class='equip_id_options' value='"+data[i]+"'>"+data[i]+"</option>");
            })
        });
    }

    var collection = document.getElementById("equip_maintenance");
    collection.classList.add("active")
</script>
{% endblock %}